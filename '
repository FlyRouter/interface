import m from 'mithril';
import { paragLink } from '../../../models/parag-links';

export const ParagLink = {
  view: ({ attrs: { text }}) =>
    m('p',
      paragLink.split(text).map((chunk: string) => {
        if (/^\[.*?\]\(.*?\)$/ig.test(chunk)) {
          return m(`a[href=${paragLink.getTextLink(chunk).text}]`, paragLink.getTextLink(chunk).link);
        }
        else {
          return chunk;
        }
      }),
    ),
}
